<!DOCTYPE html>
<html>
<head lang="en">
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1">
<style media="screen" type="text/css">
  html {
    box-sizing: border-box;
  }

  *, *:before, *:after {
    box-sizing: inherit;
  }

  * {
    font-family: "Helvetica Neue",Helvetica,Arial,sans-serif;
  }

  body {
    padding: 0px;
    margin: 0px;
  }

  nav {
    background-color: rgb(0, 220, 0);
    margin: 0px;
    padding: .5em;
  }

  h1 {
    float: left;
  }

  .clearfix:after {
    content: ".";
    visibility: hidden;
    display: block;
    height: 0;
    clear: both;
  }
</style>

<title>Log Sifter</title>
</head>
<body>
<nav>
  <div>
    <div class="clearfix">
      <h1 href="#">logSifter</h1>
      <input type="file" id="inputfile"/>
    </div>
  </div>
</nav>

<div id="logWindow"></div>

<footer>

</footer>

</body>


<script type="text/javascript">
var print = function(output){
  console.log(output);
};
var getEl = function(el) {
  return document.getElementById(el);
};
//var logList = [];

function readSingleFile(evt) {
var f = evt.target.files[0];
if (f) {
  var r = new FileReader();
  r.onload = function(e) {
    var contents = e.target.result;
    //alert( "Got the file.n" + "name: " + f.name + "n"+"type: " + f.type + "n" + "size: " + f.size + " bytesn" + "starts with: " + contents.substr(1, contents.indexOf("n")));
    var separatedLogList = contents.split("\n");
    for (var i = 0; i < separatedLogList.length; i++) {
      var tempLog = document.createElement("span");
      tempLog.innerHTML = separatedLogList[i] + "<br/>";
      getEl("logWindow").appendChild(tempLog);
    }
  };
  r.readAsText(f);
  r.onerror = function () {
    var output = r.error.name;
    if (r.error.message) {
      output += ": " + r.error.message;
    }
    print(output);
    if (r.error.name == "SecurityError") {
      alert("Verify you have permissions to access the selected file");
    }
  };
} else {
  alert("Failed to load file");

}
}


// Check for the various File API support.
if (window.File && window.FileReader && window.FileList && window.Blob) {
document.getElementById('inputfile').addEventListener('change', readSingleFile, false);
} else {
alert('The File APIs are not fully supported by your browser.');
}









</script>
</html>
